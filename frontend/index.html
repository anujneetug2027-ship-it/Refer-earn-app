<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Ambika Shelf — Signup</title>

<link rel="icon" href="favicon.ico?v=4" type="image/x-icon">
<meta name="theme-color" content="#0f1724">

<style>
:root{
  --bg:#0f1724;
  --card:#0b1220;
  --muted:#94a3b8;
  --accent:#06b6d4;
  --success:#16a34a;
  --danger:#ef4444;
  --glass: rgba(255,255,255,0.03);
  --radius:12px;
  font-family: Inter, system-ui, Arial;
}

html,body {
  height:100%;
  margin:0;
  background:linear-gradient(180deg,#071124,#071a2b);
  color:#e6eef8;
}

.wrapper {
  max-width:920px;
  margin:40px auto;
  padding:28px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:16px;
  box-shadow:0 10px 30px rgba(2,6,23,0.6);
}

header {
  display:flex;
  align-items:center;
  gap:16px;
  margin-bottom:18px;
}

.logo {
  width:56px;
  height:56px;
  background:linear-gradient(90deg,var(--accent),#60a5fa);
  border-radius:12px;
  display:grid;
  place-items:center;
  font-weight:700;
  color:#052024;
}

h1{ margin:0; font-size:20px; }
p.lead{ margin:6px 0 18px; color:var(--muted); }

.grid { display:grid; grid-template-columns: 1fr 360px; gap:20px; }

.card {
  background:var(--card);
  padding:18px;
  border-radius:var(--radius);
}

form .row { display:flex; gap:10px; margin-bottom:12px; }

label{ font-size:13px; color:var(--muted); }

input{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.04);
  background:var(--glass);
  color:inherit;
}

button{
  background:linear-gradient(90deg,var(--accent),#60a5fa);
  border:none;
  padding:10px;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
}

button.secondary{
  background:transparent;
  border:1px solid rgba(255,255,255,0.06);
  color:var(--muted);
}

.status{margin-top:12px;padding:10px;border-radius:10px;display:none;}
.status.show{display:block;}

.hidden{display:none;}

footer{
  text-align:center;
  margin-top:20px;
  color:var(--muted);
}
</style>
</head>

<body>

<div class="wrapper">

<header>
<div class="logo">RE</div>
<div>
<h1>Ambika Shelf</h1>
<p class="lead">Signup with email OTP, referral tracking, and instant rewards.</p>
</div>
</header>

<div class="grid">
<div class="card">

<section id="signupSection">
<h3>Sign up</h3>

<form id="signupForm" autocomplete="off">

<label>Full name</label>
<input id="name" required>

<label>Email</label>
<input id="email" required>

<div class="row">
<button type="submit">Get OTP</button>
<button type="button" id="useCodeBtn" class="secondary">
I have referral code
</button>
</div>

<div id="manualCodeRow" class="hidden">
<label>Referral code</label>
<input id="manualCode">
</div>

</form>

<div id="signupStatus" class="status"></div>
</section>

<section id="verifySection" class="hidden">
<h3>Verify OTP</h3>

<form id="otpForm">
<input id="otp" required>

<button type="submit">Verify & Continue</button>
</form>

<div id="verifyStatus" class="status"></div>
</section>

</div>

<div class="card">
<h3>Quick Info</h3>
<p id="baseUrl"></p>
</div>

</div>

<footer>
© AmbikaShelf 2026
</footer>

</div>

<script>
const BASE_URL="https://refer-earn-app-1.onrender.com";
document.getElementById("baseUrl").innerText=BASE_URL;

const signupForm=document.getElementById("signupForm");
const signupStatus=document.getElementById("signupStatus");
const verifySection=document.getElementById("verifySection");
const verifyStatus=document.getElementById("verifyStatus");
const otpForm=document.getElementById("otpForm");

let signupEmail="";

signupForm.addEventListener("submit", async e=>{
e.preventDefault();

const name=nameInput.value;
const email=emailInput.value;
signupEmail=email;

signupStatus.className="status show";
signupStatus.textContent="Sending OTP...";

const res=await fetch(BASE_URL+"/send-otp",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({name,email})
});

const data=await res.json();

if(!data.success){
signupStatus.textContent=data.msg;
return;
}

verifySection.classList.remove("hidden");
signupStatus.textContent="OTP sent!";
});

otpForm.addEventListener("submit", async e=>{
e.preventDefault();

const otp=document.getElementById("otp").value;

verifyStatus.className="status show";
verifyStatus.textContent="Verifying...";

const res=await fetch(BASE_URL+"/verify-otp",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({email:signupEmail,otp})
});

const data=await res.json();

if(!data.success){
verifyStatus.textContent=data.msg;
return;
}

localStorage.setItem("referralCode",data.referralCode);
localStorage.setItem("rewardBalance",data.rewardBalance);

verifyStatus.textContent="Success! Redirecting...";

setTimeout(()=>{
window.location.href="dashboard.html";
},800);
});
</script>

</body>
  </html>
